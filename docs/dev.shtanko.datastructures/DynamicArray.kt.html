<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>DynamicArray.kt</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">kotlab</a> &gt; <a href="index.source.html" class="el_package">dev.shtanko.datastructures</a> &gt; <span class="el_source">DynamicArray.kt</span></div><h1>DynamicArray.kt</h1><pre class="source lang-java linenums">/*
 * Copyright 2021 Oleksii Shtanko
 *
 * Licensed under the Apache License, Version 2.0 (the &quot;License&quot;);
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an &quot;AS IS&quot; BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package dev.shtanko.datastructures

/**
 * A dynamic array implementation that can grow or shrink as needed.
 * @param initialCapacity the initial size of the array
 * @param T the type of elements to store in the array
 */
<span class="fc" id="L24">class DynamicArray&lt;T&gt;(initialCapacity: Int) {</span>
    /**
     * The underlying array of elements.
     */
    private var data: Array&lt;Any?&gt;

    /**
     * The current size of the array.
     */
    private var size: Int = 0

    /**
     * The initial capacity of the array.
     */
    private var initialCapacity: Int

    // Init over constructor
<span class="fc" id="L41">    init {</span>
<span class="fc" id="L42">        data = arrayOfNulls(initialCapacity)</span>
<span class="fc" id="L43">        this.initialCapacity = initialCapacity</span>
<span class="fc" id="L44">    }</span>

    /**
     * Gets the element at the specified index.
     * @param index the index of the element to get
     * @return the element at the specified index
     */
<span class="fc" id="L51">    fun get(index: Int): Any? = data[index]</span>

    /**
     * Sets the element at the specified index to the given value.
     * @param index the index of the element to set
     * @param value the new value for the element
     */
    fun set(index: Int, value: T) {
<span class="fc" id="L59">        data[index] = value</span>
<span class="fc" id="L60">        size++</span>
<span class="fc" id="L61">    }</span>

    /**
     * Inserts the given value at the specified index.
     * @param index the index to insert the value at
     * @param value the value to insert
     */
    fun insert(index: Int, value: T) {
        // Check size
<span class="fc bfc" id="L70" title="All 2 branches covered.">        if (size == initialCapacity) {</span>
<span class="fc" id="L71">            resize()</span>
        }
        // Copy up | Shift
<span class="pc bpc" id="L74" title="1 of 4 branches missed.">        for (i in size downTo index) {</span>
<span class="fc" id="L75">            data[i + 1] = data[i]</span>
        }

        // Insert
<span class="fc" id="L79">        data[index] = value</span>
<span class="fc" id="L80">        size++</span>
<span class="fc" id="L81">    }</span>

    /**
     * Prints all the elements of the array to the console.
     */
    fun print() {
<span class="nc" id="L87">        data.forEach { println(&quot;data[i] = $it&quot;) }</span>
<span class="nc" id="L88">    }</span>

    /**
     * Adds the given value to the end of the array.
     * @param value the value to add
     */
    fun add(value: T) {
<span class="fc bfc" id="L95" title="All 2 branches covered.">        if (size == initialCapacity) {</span>
<span class="fc" id="L96">            resize()</span>
        }
<span class="fc" id="L98">        data[size] = value</span>
<span class="fc" id="L99">        size++</span>
<span class="fc" id="L100">    }</span>

    /**
     * Deletes the element at the specified index.
     * @param index the index of the element to delete
     */
    fun delete(index: Int) {
        // Copy down
<span class="fc bfc" id="L108" title="All 2 branches covered.">        for (i in index until size - 1) data[i] = data[i + 1]</span>

        // Clear if last element in array
<span class="pc bpc" id="L111" title="1 of 2 branches missed.">        if (index == size) data[index] = null else data[size - 1] = null</span>

<span class="fc" id="L113">        size--</span>
<span class="fc" id="L114">    }</span>

    /**
     * Gets the current size of the array.
     * @return the size of the array
     */
<span class="fc" id="L120">    fun size() = size</span>

    /**
     * Checks if the array is empty.
     * @return true if the array is empty, false otherwise
     */
<span class="fc bfc" id="L126" title="All 2 branches covered.">    fun isEmpty() = size == 0</span>

    /**
     * Checks if the array contains the given value.
     * @param value the value to check for
     * @return true if the array contains the value, false otherwise
     */
    fun contains(value: T): Boolean {
<span class="fc" id="L134">        data.forEach {</span>
<span class="fc bfc" id="L135" title="All 2 branches covered.">            if (it == value) return true</span>
<span class="fc" id="L136">        }</span>
<span class="fc" id="L137">        return false</span>
    }

    /**
     * Resizes the array to twice its current capacity.
     */
    private fun resize() {
<span class="fc bfc" id="L144" title="All 2 branches covered.">        val newCapacity = if (initialCapacity == 0) 1 else initialCapacity * 2</span>
<span class="fc" id="L145">        val newData = arrayOfNulls&lt;Any?&gt;(newCapacity)</span>
<span class="pc bpc" id="L146" title="1 of 2 branches missed.">        if (initialCapacity &gt;= 0) System.arraycopy(data, 0, newData, 0, initialCapacity)</span>
        // manual copy array
        /* for (int i = 0; i &lt; initialCapacity; i++) {
            newData[i] = data[i];
        }*/
<span class="fc" id="L151">        data = newData</span>
<span class="fc" id="L152">        initialCapacity = newCapacity</span>
<span class="fc" id="L153">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.10.202304240956</span></div></body></html>